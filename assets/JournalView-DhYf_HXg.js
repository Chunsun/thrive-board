import{L,h as H,r as u,c as k,w as Y,l as n,n as t,K as o,s as q,F as w,t as _,G as V,M as $,N as A,O as Q,I as C,y as W,A as r}from"./index-Am3GIBcH.js";const X=L("mood",{state:()=>({selectedMood:""}),actions:{setMood(c){this.selectedMood=c}}}),Z=L("journal",{state:()=>({entries:[]}),actions:{addEntry(c){this.entries.push(c),localStorage.setItem("journalEntries",JSON.stringify(this.entries))},loadEntries(){const c=localStorage.getItem("journalEntries");c&&(this.entries=JSON.parse(c))}}}),ee={class:"max-w-xl mx-auto space-y-6 p-2"},te={class:"bg-white rounded-2xl shadow p-4"},se={class:"flex justify-between text-sm text-gray-500 mb-2"},le={class:"mb-3"},oe={class:"flex gap-2"},ae=["onClick"],ne={class:"mb-3"},re={class:"italic text-gray-700 mb-1"},ie={class:"mb-3"},de={class:"mb-3"},ue={class:"flex flex-wrap gap-2"},ce=["onClick","disabled"],ve={key:1,class:"flex items-center gap-1"},be={class:"mb-3 flex items-center gap-2 text-sm text-gray-500"},me={class:"flex flex-col items-center mt-4"},fe=["disabled"],ge={class:"bg-white rounded-2xl shadow p-4"},pe={key:0,class:"text-gray-400 text-sm"},xe=["onClick"],ye={class:"text-base"},he={class:"text-xl"},we={class:"font-semibold text-gray-700"},_e={class:"flex gap-1"},Se={key:0,class:"text-xs text-gray-400 ml-2"},ke={key:0,class:"ml-8 text-gray-700 text-sm border-l-2 border-blue-100 pl-4 py-1"},Te=H({__name:"JournalView",setup(c){const T=X(),d=Z(),E=new Date,U=E.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),M=E.toISOString().slice(0,10),D=[{label:"😃",value:"Great"},{label:"🙂",value:"Okay"},{label:"😐",value:"Meh"},{label:"🙁",value:"Down"},{label:"😢",value:"Sad"}],b=u(T.selectedMood||""),I=["What challenged you most today?","What are you grateful for right now?","What did you learn today?","What would you like to improve tomorrow?","Who made a positive impact on you today?"],x=u(0),B=k(()=>I[x.value]);function F(){let l=x.value;for(;l===x.value;)l=Math.floor(Math.random()*I.length);x.value=l}const v=u(""),G=[{icon:"🧠",label:"Growth"},{icon:"🏋",label:"Health"},{icon:"❤️",label:"Love"},{icon:"💼",label:"Work"},{icon:"💰",label:"Finance"},{icon:"🧘",label:"Calm"}],a=u([]),y=u(!1),m=u(""),N=()=>{m.value&&!a.value.includes(m.value)&&(a.value.push(m.value),m.value="",y.value=!1)},K=l=>{a.value.includes(l)?a.value=a.value.filter(s=>s!==l):a.value.length<3&&a.value.push(l)},j=u(null),f=u(0),g=u(null);function P(){g.value||(j.value=Date.now(),g.value=setInterval(()=>{f.value=Math.floor((Date.now()-(j.value||Date.now()))/1e3)},1e3))}function J(){g.value&&clearInterval(g.value),g.value=null}function O(l){const s=Math.floor(l/60),e=l%60;return`${s.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}Y(v,(l,s)=>{l&&!s&&P(),l||(J(),f.value=0)});const R=()=>{!b.value||!v.value.trim()||(d.addEntry({mood:b.value,text:v.value,date:M,tags:[...a.value],seconds:f.value}),v.value="",a.value=[],T.setMood(b.value),J(),f.value=0,typeof d.loadEntries=="function"&&d.loadEntries())};if(typeof d.loadEntries=="function"&&d.loadEntries(),!d.entries||d.entries.length===0){const l=localStorage.getItem("journalEntries");l&&(d.entries=JSON.parse(l))}const S=k(()=>d.entries),h=u(null),z=k(()=>{const l=(d.entries||[]).map(i=>i.date).sort().reverse();let s=0;const e=new Date(M);for(let i=0;i<l.length;i++)if(l[i]===e.toISOString().slice(0,10))s++,e.setDate(e.getDate()-1);else if(i===0)break;return s});return(l,s)=>(r(),n("div",ee,[t("div",te,[s[10]||(s[10]=t("div",{class:"flex items-center gap-2 text-lg font-bold mb-2"},"📓 Journal",-1)),t("div",se,[t("span",null,"🗓️ Today: "+o(q(U)),1),t("span",null,"🔥 Streak: "+o(z.value)+" days",1)]),t("div",le,[s[4]||(s[4]=t("div",{class:"font-semibold mb-1"},"😄 How are you feeling today?",-1)),t("div",oe,[(r(),n(w,null,_(D,e=>t("button",{key:e.value,onClick:i=>b.value=e.value,class:W(["w-10 h-10 rounded-full flex items-center justify-center text-2xl border transition",b.value===e.value?"bg-blue-100 border-blue-500 scale-110":"bg-gray-50 border-gray-200 hover:bg-blue-50"])},o(e.label),11,ae)),64))])]),t("div",ne,[t("div",{class:"font-semibold mb-1 flex items-center gap-2"},[s[5]||(s[5]=V(" 💬 Prompt of the Day ")),t("button",{onClick:F,class:"ml-2 px-2 py-1 rounded bg-gray-100 text-xs hover:bg-blue-100"}," 🔄 Shuffle Prompt ")]),t("div",re,"“"+o(B.value)+"”",1)]),t("div",ie,[s[6]||(s[6]=t("div",{class:"font-semibold mb-1"},"📝 Your Reflection",-1)),$(t("textarea",{"onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e),class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-base resize-none",rows:"3",maxlength:"240",placeholder:"Share your thoughts..."},null,512),[[A,v.value]])]),t("div",de,[s[8]||(s[8]=t("div",{class:"font-semibold mb-1"},"🏷️ Tags (select up to 3):",-1)),t("div",ue,[(r(),n(w,null,_(G,e=>t("button",{key:e.icon+e.label,onClick:i=>K(e.label),class:W(["px-3 py-1 rounded-full border text-sm flex items-center gap-1 transition",a.value.includes(e.label)?"bg-blue-100 border-blue-400 text-blue-700 font-semibold":"bg-gray-50 border-gray-200 text-gray-500 hover:bg-blue-50"]),disabled:a.value.length>=3&&!a.value.includes(e.label)},[t("span",null,o(e.icon),1),s[7]||(s[7]=V()),t("span",null,o(e.label),1)],10,ce)),64)),y.value?(r(),n("div",ve,[$(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>m.value=e),class:"px-2 py-1 border rounded text-sm w-24",placeholder:"Tag",onKeyup:Q(N,["enter"])},null,544),[[A,m.value]]),t("button",{onClick:N,class:"text-blue-600 text-sm font-semibold"},"Add"),t("button",{onClick:s[3]||(s[3]=e=>y.value=!1),class:"text-gray-400 text-sm"},"✕")])):(r(),n("button",{key:0,onClick:s[1]||(s[1]=e=>y.value=!0),class:"px-3 py-1 rounded-full border border-dashed border-gray-300 text-gray-400 text-sm hover:bg-gray-100"}," ➕ Add Tag "))])]),t("div",be,[t("span",null,"⏱️ Reflection Time: "+o(O(f.value)),1)]),t("div",me,[t("button",{onClick:R,disabled:!b.value||!v.value.trim(),class:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-lg shadow"}," ✅ Submit Journal ",8,fe),s[9]||(s[9]=t("div",{class:"text-xs text-gray-400 mt-1"},"You’re building a powerful habit!",-1))])]),t("div",ge,[s[11]||(s[11]=t("div",{class:"flex items-center gap-2 text-lg font-bold mb-2"},"🕰️ Recent Entries",-1)),S.value&&S.value.length===0?(r(),n("div",pe," No past entries yet. ")):C("",!0),(r(!0),n(w,null,_(S.value||[],e=>{var i;return r(),n("div",{key:e.date+e.mood+e.text,class:"mb-2"},[t("div",{class:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 rounded p-2",onClick:p=>h.value===e.date?h.value=null:h.value=e.date},[t("span",ye,"• "+o(new Date(e.date).toLocaleString("en-US",{month:"short",day:"numeric"}))+" –",1),t("span",he,o(((i=D.find(p=>p.value===e.mood))==null?void 0:i.label)||"📝"),1),t("span",we,o(e.mood),1),t("span",_e,[(r(!0),n(w,null,_(e&&"tags"in e&&Array.isArray(e.tags)?e.tags:[],p=>(r(),n("span",{key:p,class:"px-2 py-0.5 rounded-full bg-gray-100 text-xs text-gray-500 border border-gray-200"},o(p),1))),128))]),"seconds"in e&&typeof e.seconds=="number"&&e.seconds>0?(r(),n("span",Se,"("+o(O(Number(e.seconds)))+")",1)):C("",!0)],8,xe),h.value===e.date?(r(),n("div",ke,o(e.text),1)):C("",!0)])}),128)),s[12]||(s[12]=t("div",{class:"flex justify-end mt-2"},[t("button",{class:"text-blue-600 text-sm font-semibold flex items-center gap-1 hover:underline"}," 📂 View All Journals → ")],-1))])]))}});export{Te as default};
